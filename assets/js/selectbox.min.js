(()=>{(function(){"use strict";function x(e){let t=e.querySelector('input[type="hidden"]'),c=e.getAttribute("data-tui-selectbox-content-id"),o=document.getElementById(c);if(!t||!o)return;let n=e.getAttribute("data-tui-selectbox-multiple")==="true",s=t.value?n?t.value.split(","):[t.value]:[];o.querySelectorAll(".select-item").forEach(i=>{let r=i.getAttribute("data-tui-selectbox-value")||"",a=s.includes(r),d=i.getAttribute("data-tui-selectbox-selected")==="true";if(a!==d)if(i.setAttribute("data-tui-selectbox-selected",a.toString()),a){i.classList.add("bg-accent","text-accent-foreground");let l=i.querySelector(".select-check");l&&l.classList.replace("opacity-0","opacity-100")}else{i.classList.remove("bg-accent","text-accent-foreground");let l=i.querySelector(".select-check");l&&l.classList.replace("opacity-100","opacity-0")}})}function u(e){let t=e.querySelector(".select-value"),c=e.querySelector('input[type="hidden"]'),o=e.getAttribute("data-tui-selectbox-content-id"),n=document.getElementById(o);if(!n&&c&&c.value){t.textContent=c.value,t.classList.remove("text-muted-foreground");return}if(!t||!n)return;let s=e.getAttribute("data-tui-selectbox-multiple")==="true",i=e.getAttribute("data-tui-selectbox-show-pills")==="true",r=t.getAttribute("data-tui-selectbox-placeholder")||"Select...",a=n.querySelectorAll('.select-item[data-tui-selectbox-selected="true"]');if(a.length===0){t.textContent=r,t.classList.add("text-muted-foreground"),c&&(c.value="");return}if(t.classList.remove("text-muted-foreground"),s){if(i){t.innerHTML="";let l=document.createElement("div");l.className="flex flex-wrap gap-1 items-center min-h-[1.5rem]";let v=[];Array.from(a).forEach(f=>{let g=document.createElement("span");g.className="inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-md bg-primary text-primary-foreground";let p=document.createElement("span");p.textContent=f.querySelector(".select-item-text")?.textContent||"",g.appendChild(p);let b=document.createElement("button");b.className="ml-0.5 hover:text-destructive focus:outline-none",b.type="button",b.innerHTML="\xD7",b.setAttribute("data-tui-selectbox-pill-remove",""),b.setAttribute("data-tui-selectbox-value",f.getAttribute("data-tui-selectbox-value")),g.appendChild(b),v.push(g)}),v.forEach(f=>l.appendChild(f)),t.appendChild(l),requestAnimationFrame(()=>{let f=t.offsetWidth;if(l.scrollWidth>f-10&&a.length>3){let p=e.getAttribute("data-tui-selectbox-selected-count-text")||"{n} items selected";t.textContent=p.replace("{n}",a.length)}})}else{let l=e.getAttribute("data-tui-selectbox-selected-count-text")||"{n} items selected";t.textContent=l.replace("{n}",a.length)}let d=Array.from(a).map(l=>l.getAttribute("data-tui-selectbox-value")||"");c&&(c.value=d.join(","))}else{let d=a[0],l=d.querySelector(".select-item-text")?.textContent||"";t.textContent=l,c&&(c.value=d.getAttribute("data-tui-selectbox-value")||"")}}function h(e){let t=e.value.toLowerCase().trim(),c=e.closest("[data-tui-popover-id]");c&&c.querySelectorAll(".select-item").forEach(o=>{let n=o.querySelector(".select-item-text")?.textContent.toLowerCase()||"",s=o.getAttribute("data-tui-selectbox-value")?.toLowerCase()||"",i=!t||n.includes(t)||s.includes(t);o.style.display=i?"":"none"})}function m(e){if(e.getAttribute("data-tui-selectbox-disabled")==="true")return;let t=e.closest("[data-tui-popover-id]"),c=t?.id,o=document.querySelector(`[data-tui-selectbox-content-id="${c}"]`);if(!o)return;let n=o.getAttribute("data-tui-selectbox-multiple")==="true",s=e.getAttribute("data-tui-selectbox-selected")==="true";if(n||t.querySelectorAll(".select-item").forEach(r=>{r.setAttribute("data-tui-selectbox-selected","false"),r.classList.remove("bg-accent","text-accent-foreground");let a=r.querySelector(".select-check");a&&a.classList.replace("opacity-100","opacity-0")}),e.setAttribute("data-tui-selectbox-selected",(!s).toString()),s){e.classList.remove("bg-accent","text-accent-foreground");let r=e.querySelector(".select-check");r&&r.classList.replace("opacity-100","opacity-0")}else{e.classList.add("bg-accent","text-accent-foreground");let r=e.querySelector(".select-check");r&&r.classList.replace("opacity-0","opacity-100")}u(o);let i=o.querySelector('input[type="hidden"]');i&&i.dispatchEvent(new Event("change",{bubbles:!0})),!n&&window.closePopover&&(window.closePopover(c),setTimeout(()=>o.focus(),50))}function S(){document.querySelectorAll(".select-container").forEach(e=>{let t=e.querySelector("button.select-trigger");t&&u(t)})}document.addEventListener("click",e=>{if(e.target.matches("[data-tui-selectbox-pill-remove]")){e.stopPropagation();let o=e.target.getAttribute("data-tui-selectbox-value"),s=e.target.closest("button.select-trigger")?.getAttribute("data-tui-selectbox-content-id"),r=document.getElementById(s)?.querySelector(`.select-item[data-tui-selectbox-value="${o}"]`);r&&m(r);return}let t=e.target.closest(".select-item");if(t){e.preventDefault(),m(t);return}let c=e.target.closest("button.select-trigger");if(c){let o=c.getAttribute("data-tui-selectbox-content-id"),n=document.getElementById(o),s=n?.querySelector("[data-tui-selectbox-search]");s&&setTimeout(()=>{n.style.display!=="none"&&s.focus()},50)}}),document.addEventListener("input",e=>{if(e.target.matches("[data-tui-selectbox-search]")){h(e.target);return}if(e.target.matches('.select-trigger input[type="hidden"]')){let t=e.target.closest(".select-trigger");t&&(x(t),u(t))}}),document.addEventListener("keydown",e=>{let t=document.activeElement;if(t?.matches("button.select-trigger")&&(e.key.length===1||e.key==="Backspace")){e.preventDefault();let o=t.getAttribute("data-tui-selectbox-content-id");t.click(),setTimeout(()=>{let n=document.getElementById(o)?.querySelector("[data-tui-selectbox-search]");n&&(n.focus(),e.key!=="Backspace"&&(n.value=e.key))},50)}let c=t?.closest("[data-tui-popover-id]");if(c?.querySelector(".select-item")){if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();let o=Array.from(c.querySelectorAll(".select-item")).filter(i=>i.style.display!=="none");if(o.length===0)return;let n=c.querySelector(".select-item:focus"),s=0;if(n){let i=o.indexOf(n);s=e.key==="ArrowDown"?(i+1)%o.length:(i-1+o.length)%o.length}o[s].focus()}else if(e.key==="Enter"&&t?.matches(".select-item"))e.preventDefault(),m(t);else if(e.key==="Escape"){let o=c.querySelector("[data-tui-selectbox-search]");if(t?.matches(".select-item"))o?.focus();else if(t===o&&window.closePopover){window.closePopover(c.id);let n=document.querySelector(`[data-tui-selectbox-content-id="${c.id}"]`);setTimeout(()=>n?.focus(),50)}}}}),document.addEventListener("mouseover",e=>{let t=e.target.closest(".select-item");if(!t||t.getAttribute("data-tui-selectbox-disabled")==="true")return;let c=t.closest("[data-tui-popover-id]");c&&(c.querySelectorAll(".select-item").forEach(o=>{o.getAttribute("data-tui-selectbox-selected")!=="true"&&o.classList.remove("bg-accent","text-accent-foreground")}),t.getAttribute("data-tui-selectbox-selected")!=="true"&&t.classList.add("bg-accent","text-accent-foreground"))}),document.addEventListener("reset",e=>{e.target.matches("form")&&e.target.querySelectorAll(".select-container").forEach(t=>{let c=t.querySelector("button.select-trigger"),o=c?.getAttribute("data-tui-selectbox-content-id"),n=document.getElementById(o);if(n){n.querySelectorAll(".select-item").forEach(i=>{i.setAttribute("data-tui-selectbox-selected","false"),i.classList.remove("bg-accent","text-accent-foreground");let r=i.querySelector(".select-check");r&&r.classList.replace("opacity-100","opacity-0")});let s=n.querySelector("[data-tui-selectbox-search]");s&&(s.value="",h(s))}c&&u(c)})});function A(e){if(e.hasAttribute("data-tui-reactive-bound"))return;e.setAttribute("data-tui-reactive-bound","true");let t=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");if(!t||!t.set)return;let c=t.set;Object.defineProperty(e,"value",{get:t.get,set:function(o){let n=this.value;if(c.call(this,o),n!==o){let s=this.closest(".select-trigger");s&&(x(s),u(s))}},configurable:!0})}function y(){document.querySelectorAll(".select-container").forEach(e=>{let t=e.querySelector("button.select-trigger");if(t&&!t.hasAttribute("data-initialized")){t.setAttribute("data-initialized","true");let c=t.querySelector('input[type="hidden"]');c&&A(c),u(t)}})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y(),new MutationObserver(y).observe(document.body,{childList:!0,subtree:!0})})();})();
